# 点击元素功能演示 (Click Element Feature Demo)

## 功能概述

新增的点击元素功能允许在执行检查项之前先点击页面上的指定元素。这对于需要交互才能显示内容的页面非常有用，比如：

- 点击按钮展开隐藏内容
- 点击标签页切换内容
- 点击加载更多按钮
- 点击弹出对话框的确认按钮

## 使用方法

### 1. 在检查项配置中添加点击元素

在巡检任务配置的"检查项目"标签页中：

1. 创建或编辑检查项
2. 在"点击元素"字段中输入CSS选择器或XPath
3. 配置正常的检查目标和期望值
4. 保存检查项

### 2. 支持的选择器格式

- **CSS选择器**: `button.expand-btn`, `#load-more`, `.tab-content a[data-tab="details"]`
- **XPath**: `//button[@class='expand-btn']`, `//div[@id='load-more']//a`

### 3. 执行流程

当巡检任务运行时：

1. 访问目标网页
2. **如果配置了点击元素，先执行点击操作**
3. 等待页面更新（2秒）
4. 执行正常的数据提取检查
5. 生成检查结果和变量

## 配置示例

### 示例1：点击展开按钮后提取内容

```
检查项名称: 详细信息检查
检查类型: 内容检查
点击元素: button.expand-details
目标: .details-content
期望值: 详细说明
```

### 示例2：点击标签页后截图

```
检查项名称: 数据标签页截图
检查类型: 视觉检查
点击元素: .tab-nav a[data-tab="data"]
目标: full
```

### 示例3：点击加载更多后下载文件

```
检查项名称: 报告下载
检查类型: 下载检查
点击元素: #load-more-reports
目标: .download-links a[href$='.pdf']
```

## 变量信息显示

在配置检查项时，如果设置了点击元素，变量信息区域会显示：

```
⚠️ 数据提取前将点击元素: button.expand-details

此检查项将生成以下变量:
${extracted_详细信息检查_任务名} - 提取的文本内容
${status_详细信息检查_任务名} - 检查状态 (成功/失败)
...
```

## 执行结果

检查结果消息中会包含点击操作的状态：

- 成功：`点击元素 button.expand-details 成功; 提取值: ...`
- 失败：`点击元素 button.expand-details 失败; 未找到匹配元素`

即使点击失败，检查仍会继续执行，确保系统的稳健性。

## 注意事项

1. **元素等待**：系统会等待最多10秒来查找可点击的元素
2. **页面更新**：点击后会等待2秒让页面更新内容
3. **错误容忍**：点击失败不会阻止后续检查的执行
4. **选择器准确性**：确保CSS选择器或XPath能准确定位到目标元素
5. **页面加载**：确保点击的元素在页面加载完成后是可见和可点击的

这个功能大大增强了巡检系统对动态网页的支持能力！