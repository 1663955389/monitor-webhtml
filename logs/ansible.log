2025-08-13 15:11:37,918 p=4217 u=runner n=ansible INFO| PLAY [代理状态和网站连通性监控] ************************************************
2025-08-13 15:11:37,924 p=4217 u=runner n=ansible INFO| TASK [Gathering Facts] *********************************************************
2025-08-13 15:11:38,836 p=4217 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:11:38,841 p=4217 u=runner n=ansible INFO| TASK [创建日志目录] ************************************************************
2025-08-13 15:11:39,112 p=4217 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:11:39,118 p=4217 u=runner n=ansible INFO| TASK [初始化监控结果变量] ******************************************************
2025-08-13 15:11:39,125 p=4217 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:11:39,131 p=4217 u=runner n=ansible INFO| TASK [执行代理监控任务] ********************************************************
2025-08-13 15:11:39,151 p=4217 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 15:11:39,156 p=4217 u=runner n=ansible INFO| TASK [proxy-monitor : 获取已启用的代理服务器列表] ******************************
2025-08-13 15:11:39,179 p=4217 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:11:39,184 p=4217 u=runner n=ansible INFO| TASK [proxy-monitor : 获取测试网站列表] ****************************************
2025-08-13 15:11:39,205 p=4217 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:11:39,211 p=4217 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化测试结果] ******************************************
2025-08-13 15:11:39,221 p=4217 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:11:39,227 p=4217 u=runner n=ansible INFO| TASK [proxy-monitor : 对每个代理执行网站连通性测试] ****************************
2025-08-13 15:11:39,233 p=4217 u=runner n=ansible INFO| TASK [proxy-monitor : 生成监控日志] ********************************************
2025-08-13 15:11:39,238 p=4217 u=runner n=ansible INFO| TASK [proxy-monitor : 更新全局监控结果] ****************************************
2025-08-13 15:11:39,246 p=4217 u=runner n=ansible INFO| TASK [计算总体统计信息] ********************************************************
2025-08-13 15:11:39,251 p=4217 u=runner n=ansible INFO| TASK [显示监控汇总] ************************************************************
2025-08-13 15:11:39,255 p=4217 u=runner n=ansible INFO| TASK [发送告警邮件] ************************************************************
2025-08-13 15:11:39,260 p=4217 u=runner n=ansible INFO| TASK [监控状态总结] ************************************************************
2025-08-13 15:11:39,260 p=4217 u=runner n=ansible INFO| PLAY RECAP *********************************************************************
2025-08-13 15:11:39,260 p=4217 u=runner n=ansible INFO| localhost                  : ok=7    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
2025-08-13 15:11:39,261 p=4217 u=runner n=ansible ERROR| ERROR! Unexpected Exception, this is probably a bug: [Errno 32] Broken pipe
2025-08-13 15:11:39,261 p=4217 u=runner n=ansible INFO| to see the full traceback, use -vvv
2025-08-13 15:11:39,435 p=4217 u=runner n=ansible INFO| the full traceback was:

Traceback (most recent call last):
  File "/opt/pipx/venvs/ansible-core/lib/python3.12/site-packages/ansible/cli/__init__.py", line 646, in cli_executor
    exit_code = cli.run()
                ^^^^^^^^^
  File "/opt/pipx/venvs/ansible-core/lib/python3.12/site-packages/ansible/cli/playbook.py", line 155, in run
    results = pbex.run()
              ^^^^^^^^^^
  File "/opt/pipx/venvs/ansible-core/lib/python3.12/site-packages/ansible/executor/playbook_executor.py", line 252, in run
    self._tqm.cleanup()
  File "/opt/pipx/venvs/ansible-core/lib/python3.12/site-packages/ansible/executor/task_queue_manager.py", line 365, in cleanup
    sys.stdout.flush()
  File "/opt/pipx/venvs/ansible-core/lib/python3.12/site-packages/ansible/utils/display.py", line 199, in locking_wrapper
    return f(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^
BrokenPipeError: [Errno 32] Broken pipe

2025-08-13 15:12:52,932 p=4382 u=runner n=ansible INFO| playbook: playbooks/monitor-proxies.yml
2025-08-13 15:12:52,932 p=4382 u=runner n=ansible INFO|   play #1 (localhost): 代理状态和网站连通性监控	TAGS: []
2025-08-13 15:12:52,933 p=4382 u=runner n=ansible INFO|     tasks:
      创建日志目录	TAGS: []
      初始化监控结果变量	TAGS: []
      执行代理监控任务	TAGS: []
      计算总体统计信息	TAGS: []
      显示监控汇总	TAGS: []
      发送告警邮件	TAGS: []
      监控状态总结	TAGS: []

2025-08-13 15:13:12,703 p=4388 u=runner n=ansible INFO| playbook: playbooks/monitor-proxies.yml
2025-08-13 15:57:04,284 p=3361 u=runner n=ansible INFO| PLAY [代理状态和网站连通性监控] ****************************************************************************************
2025-08-13 15:57:04,317 p=3361 u=runner n=ansible INFO| TASK [Gathering Facts] *************************************************************************************************
2025-08-13 15:57:05,410 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:05,415 p=3361 u=runner n=ansible INFO| TASK [创建日志目录] ****************************************************************************************************
2025-08-13 15:57:05,672 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:05,681 p=3361 u=runner n=ansible INFO| TASK [初始化监控结果变量] **********************************************************************************************
2025-08-13 15:57:05,689 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:05,694 p=3361 u=runner n=ansible INFO| TASK [执行代理监控任务] ************************************************************************************************
2025-08-13 15:57:05,712 p=3361 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 15:57:05,718 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 获取已启用的代理服务器列表] **********************************************************************
2025-08-13 15:57:05,787 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:05,792 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 获取测试网站列表] ********************************************************************************
2025-08-13 15:57:05,812 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:05,817 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化测试结果] **********************************************************************************
2025-08-13 15:57:05,826 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:05,831 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 对每个代理执行网站连通性测试] ********************************************************************
2025-08-13 15:57:05,852 p=3361 u=runner n=ansible INFO| included: /home/runner/work/monitor-webhtml/monitor-webhtml/roles/proxy-monitor/tasks/test_proxy.yml for localhost => (item=proxy1)
2025-08-13 15:57:05,855 p=3361 u=runner n=ansible INFO| included: /home/runner/work/monitor-webhtml/monitor-webhtml/roles/proxy-monitor/tasks/test_proxy.yml for localhost => (item=proxy2)
2025-08-13 15:57:05,861 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化代理测试结果] ******************************************************************************
2025-08-13 15:57:05,871 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:05,876 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 测试代理对各网站的连通性] ************************************************************************
2025-08-13 15:57:05,899 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=google) 
2025-08-13 15:57:05,907 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=github) 
2025-08-13 15:57:05,915 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=baidu) 
2025-08-13 15:57:05,923 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=httpbin) 
2025-08-13 15:57:05,924 p=3361 u=runner n=ansible INFO| skipping: [localhost]
2025-08-13 15:57:05,929 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 处理每个网站的测试结果] **************************************************************************
2025-08-13 15:57:05,983 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=0)
2025-08-13 15:57:06,019 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=1)
2025-08-13 15:57:06,057 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=2)
2025-08-13 15:57:06,093 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=3)
2025-08-13 15:57:06,100 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 处理检查模式的测试结果] **************************************************************************
2025-08-13 15:57:06,119 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=0) 
2025-08-13 15:57:06,122 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=1) 
2025-08-13 15:57:06,124 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=2) 
2025-08-13 15:57:06,127 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=3) 
2025-08-13 15:57:06,127 p=3361 u=runner n=ansible INFO| skipping: [localhost]
2025-08-13 15:57:06,133 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 计算代理成功率] **********************************************************************************
2025-08-13 15:57:06,149 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,154 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 判断代理整体状态] ********************************************************************************
2025-08-13 15:57:06,169 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,174 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 存储代理测试结果] ********************************************************************************
2025-08-13 15:57:06,193 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,200 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化代理测试结果] ******************************************************************************
2025-08-13 15:57:06,209 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,215 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 测试代理对各网站的连通性] ************************************************************************
2025-08-13 15:57:06,237 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=google) 
2025-08-13 15:57:06,245 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=github) 
2025-08-13 15:57:06,253 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=baidu) 
2025-08-13 15:57:06,261 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=httpbin) 
2025-08-13 15:57:06,262 p=3361 u=runner n=ansible INFO| skipping: [localhost]
2025-08-13 15:57:06,267 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 处理每个网站的测试结果] **************************************************************************
2025-08-13 15:57:06,321 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=0)
2025-08-13 15:57:06,358 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=1)
2025-08-13 15:57:06,395 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=2)
2025-08-13 15:57:06,432 p=3361 u=runner n=ansible INFO| ok: [localhost] => (item=3)
2025-08-13 15:57:06,439 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 处理检查模式的测试结果] **************************************************************************
2025-08-13 15:57:06,459 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=0) 
2025-08-13 15:57:06,461 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=1) 
2025-08-13 15:57:06,463 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=2) 
2025-08-13 15:57:06,466 p=3361 u=runner n=ansible INFO| skipping: [localhost] => (item=3) 
2025-08-13 15:57:06,466 p=3361 u=runner n=ansible INFO| skipping: [localhost]
2025-08-13 15:57:06,472 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 计算代理成功率] **********************************************************************************
2025-08-13 15:57:06,488 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,494 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 判断代理整体状态] ********************************************************************************
2025-08-13 15:57:06,509 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,514 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 存储代理测试结果] ********************************************************************************
2025-08-13 15:57:06,532 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,537 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 生成监控日志] ************************************************************************************
2025-08-13 15:57:06,824 p=3361 u=runner n=ansible INFO| changed: [localhost]
2025-08-13 15:57:06,830 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 更新全局监控结果] ********************************************************************************
2025-08-13 15:57:06,861 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,872 p=3361 u=runner n=ansible INFO| TASK [计算总体统计信息] ************************************************************************************************
2025-08-13 15:57:06,889 p=3361 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:57:06,895 p=3361 u=runner n=ansible INFO| TASK [显示监控汇总] ****************************************************************************************************
2025-08-13 15:57:06,906 p=3361 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "监控完成时间: 2025-08-13T15:57:04Z",
        "总测试次数: 8",
        "成功测试: NotImplemented",
        "总体成功率: 0.0%",
        "失败代理数量: 0"
    ]
}
2025-08-13 15:57:06,912 p=3361 u=runner n=ansible INFO| TASK [发送告警邮件] ****************************************************************************************************
2025-08-13 15:57:06,991 p=3361 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 15:57:06,998 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 生成HTML告警邮件] ********************************************************************************
2025-08-13 15:57:07,188 p=3361 u=runner n=ansible INFO| changed: [localhost]
2025-08-13 15:57:07,194 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 发送告警邮件] ************************************************************************************
2025-08-13 15:57:07,232 p=3361 u=runner n=ansible INFO| fatal: [localhost]: FAILED! => {"msg": "The 'file' lookup had an issue accessing the file '/home/runner/work/monitor-webhtml/monitor-webhtml/logs/alert_email.html'. file not found, use -vvvvv to see paths searched"}
2025-08-13 15:57:07,233 p=3361 u=runner n=ansible INFO| ...ignoring
2025-08-13 15:57:07,238 p=3361 u=runner n=ansible INFO| TASK [proxy-monitor : 记录邮件发送结果] ********************************************************************************
2025-08-13 15:57:07,256 p=3361 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": "告警邮件发送失败: The 'file' lookup had an issue accessing the file '/home/runner/work/monitor-webhtml/monitor-webhtml/logs/alert_email.html'. file not found, use -vvvvv to see paths searched"
}
2025-08-13 15:57:07,265 p=3361 u=runner n=ansible INFO| TASK [监控状态总结] ****************************************************************************************************
2025-08-13 15:57:07,275 p=3361 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": "代理监控周期已完成。详细日志请查看: /home/runner/work/monitor-webhtml/monitor-webhtml/logs/proxy_monitor.log"
}
2025-08-13 15:57:07,276 p=3361 u=runner n=ansible INFO| PLAY RECAP *************************************************************************************************************
2025-08-13 15:57:07,276 p=3361 u=runner n=ansible INFO| localhost                  : ok=28   changed=2    unreachable=0    failed=0    skipped=4    rescued=0    ignored=1   
2025-08-13 15:59:00,174 p=3627 u=runner n=ansible INFO| Using /home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg as config file
2025-08-13 15:59:00,327 p=3627 u=runner n=ansible INFO| PLAY [代理状态和网站连通性监控] ****************************************************************************************
2025-08-13 15:59:00,327 p=3627 u=runner n=ansible INFO| skipping: no hosts matched
2025-08-13 15:59:00,327 p=3627 u=runner n=ansible INFO| PLAY RECAP *************************************************************************************************************
2025-08-13 15:59:21,210 p=3641 u=runner n=ansible INFO| Using /home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg as config file
2025-08-13 15:59:21,361 p=3641 u=runner n=ansible INFO| PLAY [代理状态和网站连通性监控] ****************************************************************************************
2025-08-13 15:59:21,367 p=3641 u=runner n=ansible INFO| TASK [Gathering Facts] *************************************************************************************************
2025-08-13 15:59:22,230 p=3641 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 15:59:22,235 p=3641 u=runner n=ansible INFO| TASK [创建日志目录] ****************************************************************************************************
2025-08-13 15:59:22,492 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"changed": false, "gid": 118, "group": "docker", "mode": "0755", "owner": "runner", "path": "/home/runner/work/monitor-webhtml/monitor-webhtml/logs", "size": 4096, "state": "directory", "uid": 1001}
2025-08-13 15:59:22,498 p=3641 u=runner n=ansible INFO| TASK [初始化监控结果变量] **********************************************************************************************
2025-08-13 15:59:22,505 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_proxies": [], "monitoring_results": [], "successful_tests": 0, "total_tests": 0}, "changed": false}
2025-08-13 15:59:22,510 p=3641 u=runner n=ansible INFO| TASK [执行代理监控任务] ************************************************************************************************
2025-08-13 15:59:22,529 p=3641 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 15:59:22,534 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 获取已启用的代理服务器列表] **********************************************************************
2025-08-13 15:59:22,555 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"enabled_proxies": [{"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_host": "localhost", "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "enabled": true, "group_names": ["proxy_servers"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "proxy2", "inventory_hostname_short": "proxy2", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "proxy_password": "", "proxy_url": "http://192.168.10.3:10810", "proxy_username": ""}]}, "changed": false}
2025-08-13 15:59:22,560 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 获取测试网站列表] ********************************************************************************
2025-08-13 15:59:22,579 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"test_websites": [{"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "google", "inventory_hostname_short": "google", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.google.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "github", "inventory_hostname_short": "github", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 15, "test_url": "https://github.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "baidu", "inventory_hostname_short": "baidu", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.baidu.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "httpbin", "inventory_hostname_short": "httpbin", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 5, "test_url": "https://httpbin.org/status/200"}]}, "changed": false}
2025-08-13 15:59:22,584 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化测试结果] **********************************************************************************
2025-08-13 15:59:22,594 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"current_timestamp": "2025-08-13T15:59:21Z", "proxy_test_results": {}}, "changed": false}
2025-08-13 15:59:22,599 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 对每个代理执行网站连通性测试] ********************************************************************
2025-08-13 15:59:22,622 p=3641 u=runner n=ansible INFO| included: /home/runner/work/monitor-webhtml/monitor-webhtml/roles/proxy-monitor/tasks/test_proxy.yml for localhost => (item=proxy2)
2025-08-13 15:59:22,628 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化代理测试结果] ******************************************************************************
2025-08-13 15:59:22,637 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_count": 0, "proxy_name": "proxy2", "proxy_tests": [], "successful_count": 0}, "changed": false}
2025-08-13 15:59:22,642 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 显示当前测试的代理配置] **************************************************************************
2025-08-13 15:59:22,654 p=3641 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "开始测试代理: proxy2",
        "代理URL: http://192.168.10.3:10810",
        "代理用户名: (未设置)",
        "代理状态: 启用"
    ]
}
2025-08-13 15:59:22,659 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 设置代理环境变量] ********************************************************************************
2025-08-13 15:59:22,680 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_env_vars": {"HTTPS_PROXY": "http://192.168.10.3:10810", "HTTP_PROXY": "http://192.168.10.3:10810", "NO_PROXY": "localhost,127.0.0.1,::1,local,.local", "http_proxy": "http://192.168.10.3:10810", "https_proxy": "http://192.168.10.3:10810", "no_proxy": "localhost,127.0.0.1,::1,local,.local"}}, "changed": false}
2025-08-13 15:59:22,686 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 显示代理环境变量配置] ****************************************************************************
2025-08-13 15:59:22,705 p=3641 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "设置的代理环境变量:",
        "http_proxy: http://192.168.10.3:10810",
        "https_proxy: http://192.168.10.3:10810",
        "no_proxy: localhost,127.0.0.1,::1,local,.local"
    ]
}
2025-08-13 15:59:22,711 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 测试代理服务器连通性] ****************************************************************************
2025-08-13 15:59:23,166 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"changed": false, "failed_when_result": false, "msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user)."}
2025-08-13 15:59:23,171 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 显示代理连通性测试结果] **************************************************************************
2025-08-13 15:59:23,194 p=3641 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "代理连通性测试结果:",
        "状态码: N/A",
        "响应时间: N/A ms",
        "错误信息: Unsupported parameters for (ansible.legacy.uri) module: proxy_url. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user)."
    ]
}
2025-08-13 15:59:23,199 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 测试代理对各网站的连通性] ************************************************************************
2025-08-13 15:59:23,451 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=google) => {"ansible_loop_var": "website_item", "changed": false, "failed_when_result": false, "msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "google", "inventory_hostname_short": "google", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.google.com"}}
2025-08-13 15:59:23,683 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=github) => {"ansible_loop_var": "website_item", "changed": false, "failed_when_result": false, "msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "github", "inventory_hostname_short": "github", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 15, "test_url": "https://github.com"}}
2025-08-13 15:59:23,920 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=baidu) => {"ansible_loop_var": "website_item", "changed": false, "failed_when_result": false, "msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "baidu", "inventory_hostname_short": "baidu", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.baidu.com"}}
2025-08-13 15:59:24,154 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=httpbin) => {"ansible_loop_var": "website_item", "changed": false, "failed_when_result": false, "msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "httpbin", "inventory_hostname_short": "httpbin", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 5, "test_url": "https://httpbin.org/status/200"}}
2025-08-13 15:59:24,162 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 处理每个网站的测试结果] **************************************************************************
2025-08-13 15:59:24,221 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=0) => {"ansible_facts": {"failed_count": "1", "proxy_tests": [{"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.google.com", "website": "google"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 0}
2025-08-13 15:59:24,261 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=1) => {"ansible_facts": {"failed_count": "2", "proxy_tests": [{"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://github.com", "website": "github"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 1}
2025-08-13 15:59:24,302 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=2) => {"ansible_facts": {"failed_count": "3", "proxy_tests": [{"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.baidu.com", "website": "baidu"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 2}
2025-08-13 15:59:24,342 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=3) => {"ansible_facts": {"failed_count": "4", "proxy_tests": [{"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.baidu.com", "website": "baidu"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://httpbin.org/status/200", "website": "httpbin"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 3}
2025-08-13 15:59:24,349 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 显示详细的测试结果] ******************************************************************************
2025-08-13 15:59:24,370 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=google) => {
    "msg": [
        "网站 google 测试结果:",
        "URL: https://www.google.com",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: -1 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user)."
    ]
}
2025-08-13 15:59:24,377 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=github) => {
    "msg": [
        "网站 github 测试结果:",
        "URL: https://github.com",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: -1 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user)."
    ]
}
2025-08-13 15:59:24,384 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=baidu) => {
    "msg": [
        "网站 baidu 测试结果:",
        "URL: https://www.baidu.com",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: -1 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user)."
    ]
}
2025-08-13 15:59:24,391 p=3641 u=runner n=ansible INFO| ok: [localhost] => (item=httpbin) => {
    "msg": [
        "网站 httpbin 测试结果:",
        "URL: https://httpbin.org/status/200",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: -1 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user)."
    ]
}
2025-08-13 15:59:24,398 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 处理检查模式的测试结果] **************************************************************************
2025-08-13 15:59:24,418 p=3641 u=runner n=ansible INFO| skipping: [localhost] => (item=0)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 0, "skip_reason": "Conditional result was False"}
2025-08-13 15:59:24,420 p=3641 u=runner n=ansible INFO| skipping: [localhost] => (item=1)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 1, "skip_reason": "Conditional result was False"}
2025-08-13 15:59:24,423 p=3641 u=runner n=ansible INFO| skipping: [localhost] => (item=2)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 2, "skip_reason": "Conditional result was False"}
2025-08-13 15:59:24,426 p=3641 u=runner n=ansible INFO| skipping: [localhost] => (item=3)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 3, "skip_reason": "Conditional result was False"}
2025-08-13 15:59:24,427 p=3641 u=runner n=ansible INFO| skipping: [localhost] => {"changed": false, "msg": "All items skipped"}
2025-08-13 15:59:24,432 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 计算代理成功率] **********************************************************************************
2025-08-13 15:59:24,450 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_success_rate": "0.0"}, "changed": false}
2025-08-13 15:59:24,455 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 判断代理整体状态] ********************************************************************************
2025-08-13 15:59:24,470 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_status": "UNHEALTHY"}, "changed": false}
2025-08-13 15:59:24,475 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 显示代理测试汇总] ********************************************************************************
2025-08-13 15:59:24,492 p=3641 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "代理 proxy2 测试完成:",
        "总测试数: 4",
        "成功数: 0",
        "失败数: 4",
        "成功率: 0.0%",
        "整体状态: UNHEALTHY"
    ]
}
2025-08-13 15:59:24,498 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 存储代理测试结果] ********************************************************************************
2025-08-13 15:59:24,519 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_test_results": {"proxy2": {"failed_tests": "4", "proxy_connectivity": "UNKNOWN", "proxy_name": "proxy2", "proxy_url": "http://192.168.10.3:10810", "status": "UNHEALTHY", "success_rate": "0.0", "successful_tests": "0", "test_details": [{"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.baidu.com", "website": "baidu"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://httpbin.org/status/200", "website": "httpbin"}], "timestamp": "2025-08-13T15:59:21Z", "total_tests": 4}}}, "changed": false}
2025-08-13 15:59:24,525 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 生成监控日志] ************************************************************************************
2025-08-13 15:59:25,041 p=3641 u=runner n=ansible INFO| changed: [localhost] => {"changed": true, "checksum": "a945b385ca5bbef93c330524ee37a9203d635eca", "dest": "/home/runner/work/monitor-webhtml/monitor-webhtml/logs/proxy_monitor.log", "gid": 118, "group": "docker", "md5sum": "89942e4401baf72d058976b32cea1825", "mode": "0644", "owner": "runner", "size": 3546, "src": "/home/runner/.ansible/tmp/ansible-tmp-1755100764.5367303-3923-17475838149265/.source.log", "state": "file", "uid": 1001}
2025-08-13 15:59:25,048 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 更新全局监控结果] ********************************************************************************
2025-08-13 15:59:25,078 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_proxies": [], "monitoring_results": [{"proxy2": {"failed_tests": "4", "proxy_connectivity": "UNKNOWN", "proxy_name": "proxy2", "proxy_url": "http://192.168.10.3:10810", "status": "UNHEALTHY", "success_rate": "0.0", "successful_tests": "0", "test_details": [{"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://www.baidu.com", "website": "baidu"}, {"error_msg": "Unsupported parameters for (ansible.legacy.uri) module: proxy_url, user_agent. Supported parameters include: attributes, body, body_format, ca_path, ciphers, client_cert, client_key, creates, decompress, dest, follow_redirects, force, force_basic_auth, group, headers, http_agent, method, mode, owner, remote_src, removes, return_content, selevel, serole, setype, seuser, src, status_code, timeout, unix_socket, unredirected_headers, unsafe_writes, url, url_password, url_username, use_gssapi, use_netrc, use_proxy, validate_certs (attr, password, user).", "proxy_used": "http://192.168.10.3:10810", "response_time": "-1", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T15:59:21Z", "url": "https://httpbin.org/status/200", "website": "httpbin"}], "timestamp": "2025-08-13T15:59:21Z", "total_tests": 4}}], "successful_tests": "NotImplemented", "total_tests": "4"}, "changed": false}
2025-08-13 15:59:25,090 p=3641 u=runner n=ansible INFO| TASK [计算总体统计信息] ************************************************************************************************
2025-08-13 15:59:25,110 p=3641 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"overall_success_rate": "0.0", "total_failed_proxies": "0"}, "changed": false}
2025-08-13 15:59:25,115 p=3641 u=runner n=ansible INFO| TASK [显示监控汇总] ****************************************************************************************************
2025-08-13 15:59:25,127 p=3641 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "监控完成时间: 2025-08-13T15:59:21Z",
        "总测试次数: 4",
        "成功测试: NotImplemented",
        "总体成功率: 0.0%",
        "失败代理数量: 0"
    ]
}
2025-08-13 15:59:25,132 p=3641 u=runner n=ansible INFO| TASK [发送告警邮件] ****************************************************************************************************
2025-08-13 15:59:25,170 p=3641 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 15:59:25,176 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 生成HTML告警邮件] ********************************************************************************
2025-08-13 15:59:25,519 p=3641 u=runner n=ansible INFO| changed: [localhost] => {"changed": true, "checksum": "fd43002a2bc558207af7819adf7e9c901d8383f7", "dest": "/home/runner/work/monitor-webhtml/monitor-webhtml/logs/alert_email.html", "gid": 118, "group": "docker", "md5sum": "928d7cfda2000d4c62026894cc42c9d8", "mode": "0644", "owner": "runner", "size": 5803, "src": "/home/runner/.ansible/tmp/ansible-tmp-1755100765.187738-3964-67763080063386/.source.html", "state": "file", "uid": 1001}
2025-08-13 15:59:25,525 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 发送告警邮件] ************************************************************************************
2025-08-13 15:59:25,814 p=3641 u=runner n=ansible INFO| An exception occurred during task execution. To see the full traceback, use -vvv. The error was: socket.gaierror: [Errno -5] No address associated with hostname
2025-08-13 15:59:25,814 p=3641 u=runner n=ansible INFO| fatal: [localhost]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/home/runner/.ansible/tmp/ansible-tmp-1755100765.5451136-4001-7974305945392/AnsiballZ_mail.py\", line 107, in <module>\n    _ansiballz_main()\n  File \"/home/runner/.ansible/tmp/ansible-tmp-1755100765.5451136-4001-7974305945392/AnsiballZ_mail.py\", line 99, in _ansiballz_main\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\n  File \"/home/runner/.ansible/tmp/ansible-tmp-1755100765.5451136-4001-7974305945392/AnsiballZ_mail.py\", line 47, in invoke_module\n    runpy.run_module(mod_name='ansible_collections.community.general.plugins.modules.mail', init_globals=dict(_module_fqn='ansible_collections.community.general.plugins.modules.mail', _modlib_path=modlib_path),\n  File \"<frozen runpy>\", line 226, in run_module\n  File \"<frozen runpy>\", line 98, in _run_module_code\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/tmp/ansible_mail_payload_3c1gkn5k/ansible_mail_payload.zip/ansible_collections/community/general/plugins/modules/mail.py\", line 428, in <module>\n  File \"/tmp/ansible_mail_payload_3c1gkn5k/ansible_mail_payload.zip/ansible_collections/community/general/plugins/modules/mail.py\", line 307, in main\n  File \"/usr/lib/python3.12/smtplib.py\", line 255, in __init__\n    (code, msg) = self.connect(host, port)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/smtplib.py\", line 341, in connect\n    self.sock = self._get_socket(host, port, self.timeout)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/smtplib.py\", line 312, in _get_socket\n    return socket.create_connection((host, port), timeout,\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/socket.py\", line 828, in create_connection\n    for res in getaddrinfo(host, port, 0, SOCK_STREAM):\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/socket.py\", line 963, in getaddrinfo\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nsocket.gaierror: [Errno -5] No address associated with hostname\n", "module_stdout": "", "msg": "MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error", "rc": 1}
2025-08-13 15:59:25,814 p=3641 u=runner n=ansible INFO| ...ignoring
2025-08-13 15:59:25,820 p=3641 u=runner n=ansible INFO| TASK [proxy-monitor : 记录邮件发送结果] ********************************************************************************
2025-08-13 15:59:25,838 p=3641 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": "告警邮件发送失败: MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error"
}
2025-08-13 15:59:25,847 p=3641 u=runner n=ansible INFO| TASK [监控状态总结] ****************************************************************************************************
2025-08-13 15:59:25,857 p=3641 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": "代理监控周期已完成。详细日志请查看: /home/runner/work/monitor-webhtml/monitor-webhtml/logs/proxy_monitor.log"
}
2025-08-13 15:59:25,858 p=3641 u=runner n=ansible INFO| PLAY RECAP *************************************************************************************************************
2025-08-13 15:59:25,858 p=3641 u=runner n=ansible INFO| localhost                  : ok=30   changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=1   
2025-08-13 16:00:39,610 p=4050 u=runner n=ansible INFO| Using /home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg as config file
2025-08-13 16:00:39,755 p=4050 u=runner n=ansible INFO| PLAY [代理状态和网站连通性监控] ****************************************************************************************
2025-08-13 16:00:39,761 p=4050 u=runner n=ansible INFO| TASK [Gathering Facts] *************************************************************************************************
2025-08-13 16:00:40,621 p=4050 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 16:00:40,625 p=4050 u=runner n=ansible INFO| TASK [创建日志目录] ****************************************************************************************************
2025-08-13 16:00:40,876 p=4050 u=runner n=ansible INFO| ok: [localhost] => {"changed": false, "gid": 118, "group": "docker", "mode": "0755", "owner": "runner", "path": "/home/runner/work/monitor-webhtml/monitor-webhtml/logs", "size": 4096, "state": "directory", "uid": 1001}
2025-08-13 16:00:40,883 p=4050 u=runner n=ansible INFO| TASK [初始化监控结果变量] **********************************************************************************************
2025-08-13 16:00:40,890 p=4050 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_proxies": [], "monitoring_results": [], "successful_tests": 0, "total_tests": 0}, "changed": false}
2025-08-13 16:00:40,895 p=4050 u=runner n=ansible INFO| TASK [执行代理监控任务] ************************************************************************************************
2025-08-13 16:00:40,914 p=4050 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 16:00:40,919 p=4050 u=runner n=ansible INFO| TASK [proxy-monitor : 获取已启用的代理服务器列表] **********************************************************************
2025-08-13 16:00:40,939 p=4050 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"enabled_proxies": [{"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_host": "localhost", "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "enabled": true, "group_names": ["proxy_servers"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "proxy2", "inventory_hostname_short": "proxy2", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "proxy_password": "", "proxy_url": "http://192.168.10.3:10810", "proxy_username": ""}]}, "changed": false}
2025-08-13 16:00:40,944 p=4050 u=runner n=ansible INFO| TASK [proxy-monitor : 获取测试网站列表] ********************************************************************************
2025-08-13 16:00:40,963 p=4050 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"test_websites": [{"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "google", "inventory_hostname_short": "google", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.google.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "github", "inventory_hostname_short": "github", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 15, "test_url": "https://github.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "baidu", "inventory_hostname_short": "baidu", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.baidu.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "httpbin", "inventory_hostname_short": "httpbin", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 5, "test_url": "https://httpbin.org/status/200"}]}, "changed": false}
2025-08-13 16:00:40,968 p=4050 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化测试结果] **********************************************************************************
2025-08-13 16:00:40,978 p=4050 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"current_timestamp": "2025-08-13T16:00:40Z", "proxy_test_results": {}}, "changed": false}
2025-08-13 16:00:40,983 p=4050 u=runner n=ansible INFO| TASK [proxy-monitor : 对每个代理执行网站连通性测试] ********************************************************************
2025-08-13 16:00:41,005 p=4050 u=runner n=ansible INFO| included: /home/runner/work/monitor-webhtml/monitor-webhtml/roles/proxy-monitor/tasks/test_proxy.yml for localhost => (item=proxy2)
2025-08-13 16:00:41,010 p=4050 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化代理测试结果] ******************************************************************************
2025-08-13 16:00:41,020 p=4050 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_count": 0, "proxy_name": "proxy2", "proxy_tests": [], "successful_count": 0}, "changed": false}
2025-08-13 16:00:41,025 p=4050 u=runner n=ansible INFO| TASK [proxy-monitor : 显示当前测试的代理配置] **************************************************************************
2025-08-13 16:00:41,037 p=4050 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "开始测试代理: proxy2",
        "代理URL: http://192.168.10.3:10810",
        "代理用户名: (未设置)",
        "代理状态: 启用"
    ]
}
2025-08-13 16:00:41,042 p=4050 u=runner n=ansible INFO| TASK [proxy-monitor : 设置代理环境变量] ********************************************************************************
2025-08-13 16:00:41,055 p=4050 u=runner n=ansible INFO| fatal: [localhost]: FAILED! => {"msg": "The task includes an option with an undefined variable.. 'proxy_url_with_auth' is undefined\n\nThe error appears to be in '/home/runner/work/monitor-webhtml/monitor-webhtml/roles/proxy-monitor/tasks/test_proxy.yml': line 19, column 3, but may\nbe elsewhere in the file depending on the exact syntax problem.\n\nThe offending line appears to be:\n\n\n- name: 设置代理环境变量\n  ^ here\n"}
2025-08-13 16:00:41,056 p=4050 u=runner n=ansible INFO| PLAY RECAP *************************************************************************************************************
2025-08-13 16:00:41,056 p=4050 u=runner n=ansible INFO| localhost                  : ok=10   changed=0    unreachable=0    failed=1    skipped=0    rescued=0    ignored=0   
2025-08-13 16:01:07,163 p=4199 u=runner n=ansible INFO| Using /home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg as config file
2025-08-13 16:01:07,310 p=4199 u=runner n=ansible INFO| PLAY [代理状态和网站连通性监控] ****************************************************************************************
2025-08-13 16:01:07,316 p=4199 u=runner n=ansible INFO| TASK [Gathering Facts] *************************************************************************************************
2025-08-13 16:01:08,170 p=4199 u=runner n=ansible INFO| ok: [localhost]
2025-08-13 16:01:08,175 p=4199 u=runner n=ansible INFO| TASK [创建日志目录] ****************************************************************************************************
2025-08-13 16:01:08,430 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"changed": false, "gid": 118, "group": "docker", "mode": "0755", "owner": "runner", "path": "/home/runner/work/monitor-webhtml/monitor-webhtml/logs", "size": 4096, "state": "directory", "uid": 1001}
2025-08-13 16:01:08,436 p=4199 u=runner n=ansible INFO| TASK [初始化监控结果变量] **********************************************************************************************
2025-08-13 16:01:08,444 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_proxies": [], "monitoring_results": [], "successful_tests": 0, "total_tests": 0}, "changed": false}
2025-08-13 16:01:08,449 p=4199 u=runner n=ansible INFO| TASK [执行代理监控任务] ************************************************************************************************
2025-08-13 16:01:08,469 p=4199 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 16:01:08,474 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 获取已启用的代理服务器列表] **********************************************************************
2025-08-13 16:01:08,495 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"enabled_proxies": [{"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_host": "localhost", "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "enabled": true, "group_names": ["proxy_servers"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "proxy2", "inventory_hostname_short": "proxy2", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "proxy_password": "", "proxy_url": "http://192.168.10.3:10810", "proxy_username": ""}]}, "changed": false}
2025-08-13 16:01:08,500 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 获取测试网站列表] ********************************************************************************
2025-08-13 16:01:08,520 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"test_websites": [{"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "google", "inventory_hostname_short": "google", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.google.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "github", "inventory_hostname_short": "github", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 15, "test_url": "https://github.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "baidu", "inventory_hostname_short": "baidu", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.baidu.com"}, {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "httpbin", "inventory_hostname_short": "httpbin", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 5, "test_url": "https://httpbin.org/status/200"}]}, "changed": false}
2025-08-13 16:01:08,525 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化测试结果] **********************************************************************************
2025-08-13 16:01:08,535 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"current_timestamp": "2025-08-13T16:01:07Z", "proxy_test_results": {}}, "changed": false}
2025-08-13 16:01:08,540 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 对每个代理执行网站连通性测试] ********************************************************************
2025-08-13 16:01:08,562 p=4199 u=runner n=ansible INFO| included: /home/runner/work/monitor-webhtml/monitor-webhtml/roles/proxy-monitor/tasks/test_proxy.yml for localhost => (item=proxy2)
2025-08-13 16:01:08,568 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 初始化代理测试结果] ******************************************************************************
2025-08-13 16:01:08,578 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_count": 0, "proxy_name": "proxy2", "proxy_tests": [], "successful_count": 0}, "changed": false}
2025-08-13 16:01:08,583 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 显示当前测试的代理配置] **************************************************************************
2025-08-13 16:01:08,595 p=4199 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "开始测试代理: proxy2",
        "代理URL: http://192.168.10.3:10810",
        "代理用户名: (未设置)",
        "代理状态: 启用"
    ]
}
2025-08-13 16:01:08,600 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 计算带认证的代理URL] *****************************************************************************
2025-08-13 16:01:08,618 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_url_with_auth": " http://192.168.10.3:10810 "}, "changed": false}
2025-08-13 16:01:08,623 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 设置代理环境变量] ********************************************************************************
2025-08-13 16:01:08,643 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_env_vars": {"HTTPS_PROXY": " http://192.168.10.3:10810 ", "HTTP_PROXY": " http://192.168.10.3:10810 ", "NO_PROXY": "localhost,127.0.0.1,::1,local,.local", "http_proxy": " http://192.168.10.3:10810 ", "https_proxy": " http://192.168.10.3:10810 ", "no_proxy": "localhost,127.0.0.1,::1,local,.local"}}, "changed": false}
2025-08-13 16:01:08,648 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 显示代理环境变量配置] ****************************************************************************
2025-08-13 16:01:08,670 p=4199 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "设置的代理环境变量:",
        "http_proxy:  http://192.168.10.3:10810 ",
        "https_proxy:  http://192.168.10.3:10810 ",
        "no_proxy: localhost,127.0.0.1,::1,local,.local"
    ]
}
2025-08-13 16:01:08,675 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 测试代理服务器连通性] ****************************************************************************
2025-08-13 16:01:09,034 p=4199 u=runner n=ansible INFO| [DEPRECATION WARNING]: Using 'yes' or 'no' for 'follow_redirects' parameter is deprecated. This feature will be removed
 in version 2.22. Deprecation warnings can be disabled by setting deprecation_warnings=False in ansible.cfg.
2025-08-13 16:01:09,034 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"changed": false, "elapsed": 0, "failed_when_result": false, "msg": "Status code was -1 and not [200]: Request failed: <urlopen error unknown url type:  http>", "redirected": false, "status": -1, "url": "http://httpbin.org/ip"}
2025-08-13 16:01:09,040 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 显示代理连通性测试结果] **************************************************************************
2025-08-13 16:01:09,063 p=4199 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "代理连通性测试结果:",
        "状态码: -1",
        "响应时间: 0 ms",
        "错误信息: Status code was -1 and not [200]: Request failed: <urlopen error unknown url type:  http>"
    ]
}
2025-08-13 16:01:09,069 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 测试代理对各网站的连通性] ************************************************************************
2025-08-13 16:01:19,355 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=google) => {"ansible_loop_var": "website_item", "changed": false, "deprecations": [{"collection_name": null, "msg": "Using 'yes' or 'no' for 'follow_redirects' parameter is deprecated.", "version": "2.22"}], "elapsed": 10, "failed_when_result": false, "msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "redirected": false, "status": -1, "url": "https://www.google.com", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "google", "inventory_hostname_short": "google", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.google.com"}}
2025-08-13 16:01:34,630 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=github) => {"ansible_loop_var": "website_item", "changed": false, "deprecations": [{"collection_name": null, "msg": "Using 'yes' or 'no' for 'follow_redirects' parameter is deprecated.", "version": "2.22"}], "elapsed": 15, "failed_when_result": false, "msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "redirected": false, "status": -1, "url": "https://github.com", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "github", "inventory_hostname_short": "github", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 15, "test_url": "https://github.com"}}
2025-08-13 16:01:44,899 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=baidu) => {"ansible_loop_var": "website_item", "changed": false, "deprecations": [{"collection_name": null, "msg": "Using 'yes' or 'no' for 'follow_redirects' parameter is deprecated.", "version": "2.22"}], "elapsed": 10, "failed_when_result": false, "msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "redirected": false, "status": -1, "url": "https://www.baidu.com", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "baidu", "inventory_hostname_short": "baidu", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 10, "test_url": "https://www.baidu.com"}}
2025-08-13 16:01:50,166 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=httpbin) => {"ansible_loop_var": "website_item", "changed": false, "deprecations": [{"collection_name": null, "msg": "Using 'yes' or 'no' for 'follow_redirects' parameter is deprecated.", "version": "2.22"}], "elapsed": 5, "failed_when_result": false, "msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "redirected": false, "status": -1, "url": "https://httpbin.org/status/200", "website_item": {"ansible_check_mode": false, "ansible_config_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/ansible.cfg", "ansible_diff_mode": false, "ansible_facts": {}, "ansible_forks": 5, "ansible_inventory_sources": ["/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml"], "ansible_playbook_python": "/opt/pipx/venvs/ansible-core/bin/python", "ansible_run_tags": ["all"], "ansible_skip_tags": [], "ansible_verbosity": 1, "ansible_version": {"full": "2.18.7", "major": 2, "minor": 18, "revision": 7, "string": "2.18.7"}, "expected_status": 200, "group_names": ["test_websites"], "groups": {"all": ["proxy1", "proxy2", "proxy3", "google", "github", "baidu", "httpbin"], "proxy_servers": ["proxy1", "proxy2", "proxy3"], "test_websites": ["google", "github", "baidu", "httpbin"], "ungrouped": []}, "inventory_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory", "inventory_file": "/home/runner/work/monitor-webhtml/monitor-webhtml/inventory/hosts.yml", "inventory_hostname": "httpbin", "inventory_hostname_short": "httpbin", "playbook_dir": "/home/runner/work/monitor-webhtml/monitor-webhtml/playbooks", "request_timeout": 5, "test_url": "https://httpbin.org/status/200"}}
2025-08-13 16:01:50,173 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 处理每个网站的测试结果] **************************************************************************
2025-08-13 16:01:50,233 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=0) => {"ansible_facts": {"failed_count": "1", "proxy_tests": [{"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.google.com", "website": "google"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 0}
2025-08-13 16:01:50,274 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=1) => {"ansible_facts": {"failed_count": "2", "proxy_tests": [{"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "15000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://github.com", "website": "github"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 1}
2025-08-13 16:01:50,316 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=2) => {"ansible_facts": {"failed_count": "3", "proxy_tests": [{"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "15000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.baidu.com", "website": "baidu"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 2}
2025-08-13 16:01:50,357 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=3) => {"ansible_facts": {"failed_count": "4", "proxy_tests": [{"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "15000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.baidu.com", "website": "baidu"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "5000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://httpbin.org/status/200", "website": "httpbin"}], "successful_count": "0"}, "ansible_loop_var": "item_index", "changed": false, "item_index": 3}
2025-08-13 16:01:50,364 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 显示详细的测试结果] ******************************************************************************
2025-08-13 16:01:50,385 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=google) => {
    "msg": [
        "网站 google 测试结果:",
        "URL: https://www.google.com",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: 10000 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>"
    ]
}
2025-08-13 16:01:50,392 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=github) => {
    "msg": [
        "网站 github 测试结果:",
        "URL: https://github.com",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: 15000 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>"
    ]
}
2025-08-13 16:01:50,400 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=baidu) => {
    "msg": [
        "网站 baidu 测试结果:",
        "URL: https://www.baidu.com",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: 10000 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>"
    ]
}
2025-08-13 16:01:50,407 p=4199 u=runner n=ansible INFO| ok: [localhost] => (item=httpbin) => {
    "msg": [
        "网站 httpbin 测试结果:",
        "URL: https://httpbin.org/status/200",
        "状态: FAILED",
        "状态码: -1",
        "响应时间: 5000 ms",
        "使用代理: http://192.168.10.3:10810",
        "错误信息: Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>"
    ]
}
2025-08-13 16:01:50,413 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 处理检查模式的测试结果] **************************************************************************
2025-08-13 16:01:50,436 p=4199 u=runner n=ansible INFO| skipping: [localhost] => (item=0)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 0, "skip_reason": "Conditional result was False"}
2025-08-13 16:01:50,438 p=4199 u=runner n=ansible INFO| skipping: [localhost] => (item=1)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 1, "skip_reason": "Conditional result was False"}
2025-08-13 16:01:50,441 p=4199 u=runner n=ansible INFO| skipping: [localhost] => (item=2)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 2, "skip_reason": "Conditional result was False"}
2025-08-13 16:01:50,444 p=4199 u=runner n=ansible INFO| skipping: [localhost] => (item=3)  => {"ansible_loop_var": "item_index", "changed": false, "false_condition": "ansible_check_mode and website_test_result.results is not defined", "item_index": 3, "skip_reason": "Conditional result was False"}
2025-08-13 16:01:50,445 p=4199 u=runner n=ansible INFO| skipping: [localhost] => {"changed": false, "msg": "All items skipped"}
2025-08-13 16:01:50,451 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 计算代理成功率] **********************************************************************************
2025-08-13 16:01:50,468 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_success_rate": "0.0"}, "changed": false}
2025-08-13 16:01:50,473 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 判断代理整体状态] ********************************************************************************
2025-08-13 16:01:50,489 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_status": "UNHEALTHY"}, "changed": false}
2025-08-13 16:01:50,494 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 显示代理测试汇总] ********************************************************************************
2025-08-13 16:01:50,511 p=4199 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "代理 proxy2 测试完成:",
        "总测试数: 4",
        "成功数: 0",
        "失败数: 4",
        "成功率: 0.0%",
        "整体状态: UNHEALTHY"
    ]
}
2025-08-13 16:01:50,516 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 存储代理测试结果] ********************************************************************************
2025-08-13 16:01:50,538 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"proxy_test_results": {"proxy2": {"failed_tests": "4", "proxy_connectivity": -1, "proxy_name": "proxy2", "proxy_url": "http://192.168.10.3:10810", "status": "UNHEALTHY", "success_rate": "0.0", "successful_tests": "0", "test_details": [{"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "15000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.baidu.com", "website": "baidu"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "5000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://httpbin.org/status/200", "website": "httpbin"}], "timestamp": "2025-08-13T16:01:07Z", "total_tests": 4}}}, "changed": false}
2025-08-13 16:01:50,544 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 生成监控日志] ************************************************************************************
2025-08-13 16:01:51,164 p=4199 u=runner n=ansible INFO| changed: [localhost] => {"changed": true, "checksum": "fb3fac8bc01b03cf9aaf73a533b132b55156b5f6", "dest": "/home/runner/work/monitor-webhtml/monitor-webhtml/logs/proxy_monitor.log", "gid": 118, "group": "docker", "md5sum": "b17453ac45c8ab16c3ccee45b681ad47", "mode": "0644", "owner": "runner", "size": 1841, "src": "/home/runner/.ansible/tmp/ansible-tmp-1755100910.5555787-4471-43382615131270/.source.log", "state": "file", "uid": 1001}
2025-08-13 16:01:51,170 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 更新全局监控结果] ********************************************************************************
2025-08-13 16:01:51,200 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"failed_proxies": [], "monitoring_results": [{"proxy2": {"failed_tests": "4", "proxy_connectivity": -1, "proxy_name": "proxy2", "proxy_url": "http://192.168.10.3:10810", "status": "UNHEALTHY", "success_rate": "0.0", "successful_tests": "0", "test_details": [{"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.google.com", "website": "google"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "15000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://github.com", "website": "github"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "10000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://www.baidu.com", "website": "baidu"}, {"error_msg": "Status code was -1 and not [200, 201, 202, 204, 301, 302, 304, 400, 401, 403, 404]: Request failed: <urlopen error timed out>", "proxy_used": "http://192.168.10.3:10810", "response_time": "5000", "status": "FAILED", "status_code": "-1", "timestamp": "2025-08-13T16:01:07Z", "url": "https://httpbin.org/status/200", "website": "httpbin"}], "timestamp": "2025-08-13T16:01:07Z", "total_tests": 4}}], "successful_tests": "NotImplemented", "total_tests": "4"}, "changed": false}
2025-08-13 16:01:51,211 p=4199 u=runner n=ansible INFO| TASK [计算总体统计信息] ************************************************************************************************
2025-08-13 16:01:51,229 p=4199 u=runner n=ansible INFO| ok: [localhost] => {"ansible_facts": {"overall_success_rate": "0.0", "total_failed_proxies": "0"}, "changed": false}
2025-08-13 16:01:51,233 p=4199 u=runner n=ansible INFO| TASK [显示监控汇总] ****************************************************************************************************
2025-08-13 16:01:51,245 p=4199 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": [
        "监控完成时间: 2025-08-13T16:01:07Z",
        "总测试次数: 4",
        "成功测试: NotImplemented",
        "总体成功率: 0.0%",
        "失败代理数量: 0"
    ]
}
2025-08-13 16:01:51,250 p=4199 u=runner n=ansible INFO| TASK [发送告警邮件] ****************************************************************************************************
2025-08-13 16:01:51,289 p=4199 u=runner n=ansible INFO| included: proxy-monitor for localhost
2025-08-13 16:01:51,296 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 生成HTML告警邮件] ********************************************************************************
2025-08-13 16:01:51,646 p=4199 u=runner n=ansible INFO| changed: [localhost] => {"changed": true, "checksum": "e3dd86cd9aaa32a06f306f771f97d92538580330", "dest": "/home/runner/work/monitor-webhtml/monitor-webhtml/logs/alert_email.html", "gid": 118, "group": "docker", "md5sum": "a1502e55743e09faf5e61c08646b9325", "mode": "0644", "owner": "runner", "size": 5814, "src": "/home/runner/.ansible/tmp/ansible-tmp-1755100911.3073943-4514-104691704713199/.source.html", "state": "file", "uid": 1001}
2025-08-13 16:01:51,652 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 发送告警邮件] ************************************************************************************
2025-08-13 16:01:51,920 p=4199 u=runner n=ansible INFO| An exception occurred during task execution. To see the full traceback, use -vvv. The error was: socket.gaierror: [Errno -5] No address associated with hostname
2025-08-13 16:01:51,920 p=4199 u=runner n=ansible INFO| fatal: [localhost]: FAILED! => {"changed": false, "module_stderr": "Traceback (most recent call last):\n  File \"/home/runner/.ansible/tmp/ansible-tmp-1755100911.6722717-4553-91350014541878/AnsiballZ_mail.py\", line 107, in <module>\n    _ansiballz_main()\n  File \"/home/runner/.ansible/tmp/ansible-tmp-1755100911.6722717-4553-91350014541878/AnsiballZ_mail.py\", line 99, in _ansiballz_main\n    invoke_module(zipped_mod, temp_path, ANSIBALLZ_PARAMS)\n  File \"/home/runner/.ansible/tmp/ansible-tmp-1755100911.6722717-4553-91350014541878/AnsiballZ_mail.py\", line 47, in invoke_module\n    runpy.run_module(mod_name='ansible_collections.community.general.plugins.modules.mail', init_globals=dict(_module_fqn='ansible_collections.community.general.plugins.modules.mail', _modlib_path=modlib_path),\n  File \"<frozen runpy>\", line 226, in run_module\n  File \"<frozen runpy>\", line 98, in _run_module_code\n  File \"<frozen runpy>\", line 88, in _run_code\n  File \"/tmp/ansible_mail_payload_4lrpcbfx/ansible_mail_payload.zip/ansible_collections/community/general/plugins/modules/mail.py\", line 428, in <module>\n  File \"/tmp/ansible_mail_payload_4lrpcbfx/ansible_mail_payload.zip/ansible_collections/community/general/plugins/modules/mail.py\", line 307, in main\n  File \"/usr/lib/python3.12/smtplib.py\", line 255, in __init__\n    (code, msg) = self.connect(host, port)\n                  ^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/smtplib.py\", line 341, in connect\n    self.sock = self._get_socket(host, port, self.timeout)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/smtplib.py\", line 312, in _get_socket\n    return socket.create_connection((host, port), timeout,\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/socket.py\", line 828, in create_connection\n    for res in getaddrinfo(host, port, 0, SOCK_STREAM):\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/usr/lib/python3.12/socket.py\", line 963, in getaddrinfo\n    for res in _socket.getaddrinfo(host, port, family, type, proto, flags):\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nsocket.gaierror: [Errno -5] No address associated with hostname\n", "module_stdout": "", "msg": "MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error", "rc": 1}
2025-08-13 16:01:51,920 p=4199 u=runner n=ansible INFO| ...ignoring
2025-08-13 16:01:51,927 p=4199 u=runner n=ansible INFO| TASK [proxy-monitor : 记录邮件发送结果] ********************************************************************************
2025-08-13 16:01:51,944 p=4199 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": "告警邮件发送失败: MODULE FAILURE: No start of json char found\nSee stdout/stderr for the exact error"
}
2025-08-13 16:01:51,953 p=4199 u=runner n=ansible INFO| TASK [监控状态总结] ****************************************************************************************************
2025-08-13 16:01:51,963 p=4199 u=runner n=ansible INFO| ok: [localhost] => {
    "msg": "代理监控周期已完成。详细日志请查看: /home/runner/work/monitor-webhtml/monitor-webhtml/logs/proxy_monitor.log"
}
2025-08-13 16:01:51,964 p=4199 u=runner n=ansible INFO| PLAY RECAP *************************************************************************************************************
2025-08-13 16:01:51,964 p=4199 u=runner n=ansible INFO| localhost                  : ok=31   changed=2    unreachable=0    failed=0    skipped=1    rescued=0    ignored=1   
